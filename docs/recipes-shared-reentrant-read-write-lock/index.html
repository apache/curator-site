<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-recipes-shared-reentrant-read-write-lock">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Recipe: Shared Reentrant Read Write Lock | Apache Curator</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://curator.apache.org/img/curator-highres.png"><meta data-rh="true" name="twitter:image" content="https://curator.apache.org/img/curator-highres.png"><meta data-rh="true" property="og:url" content="https://curator.apache.org/docs/recipes-shared-reentrant-read-write-lock"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Recipe: Shared Reentrant Read Write Lock | Apache Curator"><meta data-rh="true" name="description" content="Description"><meta data-rh="true" property="og:description" content="Description"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://curator.apache.org/docs/recipes-shared-reentrant-read-write-lock"><link data-rh="true" rel="alternate" href="https://curator.apache.org/docs/recipes-shared-reentrant-read-write-lock" hreflang="en"><link data-rh="true" rel="alternate" href="https://curator.apache.org/docs/recipes-shared-reentrant-read-write-lock" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.6d47ceac.css">
<link rel="preload" href="/assets/js/runtime~main.83f62504.js" as="script">
<link rel="preload" href="/assets/js/main.f04bfe3f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_wktF" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/curator-logo.svg" alt="Apache Curator" class="themedImage_EivR themedImage--light_K1FT"><img src="/img/curator-logo.svg" alt="Apache Curator" class="themedImage_EivR themedImage--dark_VHrF"></div></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/about">Documentation</a><a class="navbar__item navbar__link" href="/community/">Community</a><a class="navbar__item navbar__link" href="/download">Download</a><a href="https://github.com/apache/curator" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_fkQ5"><div class="navbar__search searchBarContainer_Asw0"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_iiEU searchBarLoadingRing_OJ_s"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Aoh5"><kbd class="searchHint_qTki">ctrl</kbd><kbd class="searchHint_qTki">K</kbd></div></div></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_yzqZ docsWrapper_Mf0e"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_AsTX" type="button"></button><div class="docPage_J7cZ"><aside class="theme-doc-sidebar-container docSidebarContainer_B5xF"><div class="sidebarViewport_HKBN"><div class="sidebar_FL3t"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_b8rK"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/about">About</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/examples">Examples</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/recipes">Recipes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Recipes&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-leader-latch">Leader Latch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-leader-election">Leader Election</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-shared-reentrant-lock">Shared Reentrant Lock</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-shared-lock">Shared Lock</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/recipes-shared-reentrant-read-write-lock">Shared Reentrant Read Write Lock</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-shared-semaphore">Shared Semaphore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-multi-shared-lock">Multi Shared Lock</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-barrier">Barrier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-double-barrier">Double Barrier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-shared-counter">Shared Counter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-distributed-atomic-long">Distributed Atomic Long</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-curator-cache">Curator Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-path-cache">Path Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-node-cache">Node Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-tree-cache">Tree Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-persistent-watcher">Persistent Recursive Watcher</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-persistent-node">Persistent Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-persistent-ttl-node">Persistent TTL Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-group-member">Group Member</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-distributed-queue">Distributed Queue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-distributed-id-queue">Distributed ID Queue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-distributed-priority-queue">Distributed Priority Queue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-distributed-delay-queue">Distributed Delay Queue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/recipes-simple-distributed-queue">Simple Distributed Queue</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/async">Curator Async</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/modeled">Strongly Typed Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/migrations">Migrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/schema">Schema Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_Nmwm menu__list-item">LOW LEVEL</li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/framework">Framework</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/utilities">Utilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/client">Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_Nmwm menu__list-item">DETAILS</li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/errors">Error Handling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/logging">Logging and Tracing</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tech-notes">Tech Notes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tech Notes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/zk-compatibility-34">ZooKeeper 3.4.x</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/breaking-changes">Breaking Changes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="/apidocs/" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_MXUU">Javadoc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_CSWz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://cwiki.apache.org/confluence/display/CURATOR" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_MXUU">Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_CSWz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_Nmwm menu__list-item">EXTENSIONS</li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/service-discovery">Service Discovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/service-discovery-server">Service Discovery Server</a></li></ul></nav></div></div></aside><main class="docMainContainer_ngMu"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_SWCv"><div class="docItemContainer_CXRj"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_CbLh" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_MwBd"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/recipes"><span itemprop="name">Recipes</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Shared Reentrant Read Write Lock</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible__HJe theme-doc-toc-mobile tocMobile_OHwm"><button type="button" class="clean-btn tocCollapsibleButton_AXYp">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Recipe: Shared Reentrant Read Write Lock</h1><h2 class="anchor anchorWithStickyNavbar_CuU3" id="description">Description<a href="#description" class="hash-link" aria-label="Direct link to Description" title="Direct link to Description">​</a></h2><p>A re-entrant read/write mutex that works across JVMs. Uses Zookeeper to hold the lock. All processes in all JVMs that use the same lock path will achieve an inter-process critical section. Further, this mutex is &quot;fair&quot; - each user will get the mutex in the order requested (from ZK&#x27;s point of view).</p><p>A read write lock maintains a pair of associated locks, one for read-only operations and one for writing. The read lock may be held simultaneously by multiple reader processes, so long as there are no writers. The write lock is exclusive.</p><h3 class="anchor anchorWithStickyNavbar_CuU3" id="reentrancy">Reentrancy<a href="#reentrancy" class="hash-link" aria-label="Direct link to Reentrancy" title="Direct link to Reentrancy">​</a></h3><p>This lock allows both readers and writers to reacquire read or write locks in the style of a re-entrant lock. Non-re-entrant readers are not allowed until all write locks held by the writing thread/process have been released. Additionally, a writer can acquire the read lock, but not vice-versa. If a reader tries to acquire the write lock it will never succeed.</p><h3 class="anchor anchorWithStickyNavbar_CuU3" id="lock-downgrading">Lock Downgrading<a href="#lock-downgrading" class="hash-link" aria-label="Direct link to Lock Downgrading" title="Direct link to Lock Downgrading">​</a></h3><p>Reentrancy also allows downgrading from the write lock to a read lock, by acquiring the write lock, then the read lock and then releasing the write lock. However, upgrading from a read lock to the write lock is not possible.</p><h2 class="anchor anchorWithStickyNavbar_CuU3" id="participating-classes">Participating Classes<a href="#participating-classes" class="hash-link" aria-label="Direct link to Participating Classes" title="Direct link to Participating Classes">​</a></h2><ul><li>InterProcessReadWriteLock</li><li>InterProcessLock</li></ul><h2 class="anchor anchorWithStickyNavbar_CuU3" id="create-an-interprocessreadwritelock">Create an InterProcessReadWriteLock<a href="#create-an-interprocessreadwritelock" class="hash-link" aria-label="Direct link to Create an InterProcessReadWriteLock" title="Direct link to Create an InterProcessReadWriteLock">​</a></h2><div class="language-java codeBlockContainer_EZCn theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_YKKe"><pre tabindex="0" class="prism-code language-java codeBlock_rPGn thin-scrollbar"><code class="codeBlockLines_yOdO"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Parameters:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// client - the client</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// basePath - path to use for locking</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">InterProcessReadWriteLock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">CuratorFramework</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> basePath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Mf1z"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zP6O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_K6ps"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_mWpP"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_CuU3" id="general-usage">General Usage<a href="#general-usage" class="hash-link" aria-label="Direct link to General Usage" title="Direct link to General Usage">​</a></h2><p>Access either the read lock or the write lock and then use the methods as described for <a href="/docs/recipes-shared-lock">Shared lock</a>.</p><div class="language-java codeBlockContainer_EZCn theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_YKKe"><pre tabindex="0" class="prism-code language-java codeBlock_rPGn thin-scrollbar"><code class="codeBlockLines_yOdO"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">InterProcessLock</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">readLock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">InterProcessLock</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">writeLock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Mf1z"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_zP6O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_K6ps"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_mWpP"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_CuU3" id="error-handling">Error Handling<a href="#error-handling" class="hash-link" aria-label="Direct link to Error Handling" title="Direct link to Error Handling">​</a></h2><p>It is strongly recommended that you add a <code>ConnectionStateListener</code> and watch for SUSPENDED and LOST state changes. If a SUSPENDED state is reported you cannot be certain that you still hold the lock unless you subsequently receive a RECONNECTED state. If a LOST state is reported it is certain that you no longer hold the lock.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/curator-site/tree/main/docs/recipes-shared-reentrant-read-write-lock.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Gxr8" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_TpUI"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-06-15T05:28:50.000Z">Jun 15, 2024</time></b> by <b>dependabot[bot]</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/recipes-shared-lock"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Shared Lock</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/recipes-shared-semaphore"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Shared Semaphore</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_nTXA thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#description" class="table-of-contents__link toc-highlight">Description</a><ul><li><a href="#reentrancy" class="table-of-contents__link toc-highlight">Reentrancy</a></li><li><a href="#lock-downgrading" class="table-of-contents__link toc-highlight">Lock Downgrading</a></li></ul></li><li><a href="#participating-classes" class="table-of-contents__link toc-highlight">Participating Classes</a></li><li><a href="#create-an-interprocessreadwritelock" class="table-of-contents__link toc-highlight">Create an InterProcessReadWriteLock</a></li><li><a href="#general-usage" class="table-of-contents__link toc-highlight">General Usage</a></li><li><a href="#error-handling" class="table-of-contents__link toc-highlight">Error Handling</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.apache.org/" rel="noopener noreferrer" class="footerLogoLink__Ozp"><img src="/img/asf-logo.svg" alt="Apache logo" class="themedImage_EivR themedImage--light_K1FT footer__logo" height="128px"><img src="/img/asf-logo.svg" alt="Apache logo" class="themedImage_EivR themedImage--dark_VHrF footer__logo" height="128px"></a></div><div class="footer__copyright">Apache Curator, the Apache feather logo, and the Apache Curator project logos are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.83f62504.js"></script>
<script src="/assets/js/main.f04bfe3f.js"></script>
</body>
</html>