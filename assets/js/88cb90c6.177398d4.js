"use strict";(self.webpackChunkcurator_site=self.webpackChunkcurator_site||[]).push([[2760],{1392:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"tech-note-04","title":"Tech Note 4","description":"ZooKeeper makes a very bad Queue source.","source":"@site/docs/tech-note-04.md","sourceDirName":".","slug":"/tech-note-04","permalink":"/docs/tech-note-04","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/curator-site/tree/main/docs/tech-note-04.md","tags":[],"version":"current","lastUpdatedBy":"tison","lastUpdatedAt":1741292192000,"frontMatter":{},"sidebar":"docs","previous":{"title":"Tech Note 3","permalink":"/docs/tech-note-03"},"next":{"title":"Tech Note 5","permalink":"/docs/tech-note-05"}}');var s=o(5105),r=o(6413);const a={},i="Tech Note 4",c={},d=[{value:"Details",id:"details",level:2}];function l(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"tech-note-4",children:"Tech Note 4"})}),"\n",(0,s.jsx)(t.p,{children:"ZooKeeper makes a very bad Queue source."}),"\n",(0,s.jsx)(t.h2,{id:"details",children:"Details"}),"\n",(0,s.jsx)(t.p,{children:"The ZooKeeper recipes page lists Queues as a possible use-case for ZooKeeper. Curator includes several Queue recipes. In our experience, however, it is a bad idea to use ZooKeeper as a Queue:"}),"\n",(0,s.jsx)(t.p,{children:"ZooKeeper has a 1MB transport limitation. In practice this means that ZNodes must be relatively small. Typically, queues can contain many thousands of messages."}),"\n",(0,s.jsx)(t.p,{children:"ZooKeeper can slow down considerably on startup if there are many large ZNodes. This will be common if you are using ZooKeeper for queues. You will need to significantly increase initLimit and syncLimit."}),"\n",(0,s.jsxs)(t.p,{children:["If a ZNode gets too big it can be extremely difficult to clean. getChildren() will fail on the node. At Netflix, we had to create a special-purpose program that had a huge value for ",(0,s.jsx)(t.code,{children:"jute.maxbuffer"})," in order to get the nodes and delete them. ZooKeeper can start to perform badly if there are many nodes with thousands of children."]}),"\n",(0,s.jsx)(t.p,{children:"The ZooKeeper database is kept entirely in memory. So, you can never have more messages than can fit in memory."})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},6413:(e,t,o)=>{o.d(t,{R:()=>a,x:()=>i});var n=o(8101);const s={},r=n.createContext(s);function a(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);