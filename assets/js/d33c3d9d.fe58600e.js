"use strict";(self.webpackChunkcurator_site=self.webpackChunkcurator_site||[]).push([[8884],{4097:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>K,contentTitle:()=>Z,default:()=>A,frontMatter:()=>T,metadata:()=>o,toc:()=>z});const o=JSON.parse('{"id":"zk-compatibility-34","title":"ZooKeeper Version 3.4.x Compatibility","description":"ZooKeeper 3.4.x is now at end-of-life. Consequently, the latest versions of Curator have removed support for it. If you wish to use Curator with ZooKeeper 3.4.x you should pin to version 4.2.x of Curator. Curator 4.2.x supports ZooKeeper 3.4.x ensembles in a soft-compatibility mode. To use this mode you must exclude ZooKeeper when adding Curator to your dependency management tool.","source":"@site/docs/zk-compatibility-34.md","sourceDirName":".","slug":"/zk-compatibility-34","permalink":"/docs/zk-compatibility-34","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/curator-site/tree/main/docs/zk-compatibility-34.md","tags":[],"version":"current","lastUpdatedBy":"tison","lastUpdatedAt":1740614244000,"frontMatter":{"sidebar_label":"ZooKeeper 3.4.x"},"sidebar":"docs","previous":{"title":"Tech Note 15","permalink":"/docs/tech-note-15"},"next":{"title":"Breaking Changes","permalink":"/docs/breaking-changes"}}');var n=r(5105),a=r(6413),s=r(8101),i=r(3526),l=r(5966),u=r(5234),c=r(4588),d=r(5635),p=r(8512),h=r(8506);function m(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function f(e){const{values:t,children:r}=e;return(0,s.useMemo)((()=>{const e=t??function(e){return m(e).map((e=>{let{props:{value:t,label:r,attributes:o,default:n}}=e;return{value:t,label:r,attributes:o,default:n}}))}(r);return function(e){const t=(0,p.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,r])}function b(e){let{value:t,tabValues:r}=e;return r.some((e=>e.value===t))}function x(e){let{queryString:t=!1,groupId:r}=e;const o=(0,u.W6)(),n=function(e){let{queryString:t=!1,groupId:r}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:t,groupId:r});return[(0,d.aZ)(n),(0,s.useCallback)((e=>{if(!n)return;const t=new URLSearchParams(o.location.search);t.set(n,e),o.replace({...o.location,search:t.toString()})}),[n,o])]}function g(e){const{defaultValue:t,queryString:r=!1,groupId:o}=e,n=f(e),[a,i]=(0,s.useState)((()=>function(e){let{defaultValue:t,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!b({value:t,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const o=r.find((e=>e.default))??r[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:n}))),[l,u]=x({queryString:r,groupId:o}),[d,p]=function(e){let{groupId:t}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,n]=(0,h.Dv)(r);return[o,(0,s.useCallback)((e=>{r&&n.set(e)}),[r,n])]}({groupId:o}),m=(()=>{const e=l??d;return b({value:e,tabValues:n})?e:null})();(0,c.A)((()=>{m&&i(m)}),[m]);return{selectedValue:a,selectValue:(0,s.useCallback)((e=>{if(!b({value:e,tabValues:n}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),p(e)}),[u,p,n]),tabValues:n}}var v=r(4872);const y={tabList:"tabList_zDcd",tabItem:"tabItem_OcRt"};function I(e){let{className:t,block:r,selectedValue:o,selectValue:a,tabValues:s}=e;const u=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.a_)(),d=e=>{const t=e.currentTarget,r=u.indexOf(t),n=s[r].value;n!==o&&(c(t),a(n))},p=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const r=u.indexOf(e.currentTarget)+1;t=u[r]??u[0];break}case"ArrowLeft":{const r=u.indexOf(e.currentTarget)-1;t=u[r]??u[u.length-1];break}}t?.focus()};return(0,n.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":r},t),children:s.map((e=>{let{value:t,label:r,attributes:a}=e;return(0,n.jsx)("li",{role:"tab",tabIndex:o===t?0:-1,"aria-selected":o===t,ref:e=>{u.push(e)},onKeyDown:p,onClick:d,...a,className:(0,i.A)("tabs__item",y.tabItem,a?.className,{"tabs__item--active":o===t}),children:r??t},t)}))})}function j(e){let{lazy:t,children:r,selectedValue:o}=e;const a=(Array.isArray(r)?r:[r]).filter(Boolean);if(t){const e=a.find((e=>e.props.value===o));return e?(0,s.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,n.jsx)("div",{className:"margin-top--md",children:a.map(((e,t)=>(0,s.cloneElement)(e,{key:t,hidden:e.props.value!==o})))})}function k(e){const t=g(e);return(0,n.jsxs)("div",{className:(0,i.A)("tabs-container",y.tabList),children:[(0,n.jsx)(I,{...t,...e}),(0,n.jsx)(j,{...t,...e})]})}function w(e){const t=(0,v.A)();return(0,n.jsx)(k,{...e,children:m(e.children)},String(t))}const C={tabItem:"tabItem_jUV8"};function V(e){let{children:t,hidden:r,className:o}=e;return(0,n.jsx)("div",{role:"tabpanel",className:(0,i.A)(C.tabItem,o),hidden:r,children:t})}const T={sidebar_label:"ZooKeeper 3.4.x"},Z="ZooKeeper Version 3.4.x Compatibility",K={},z=[{value:"Testing With ZooKeeper 3.4.x",id:"testing-with-zookeeper-34x",level:2}];function N(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"zookeeper-version-34x-compatibility",children:"ZooKeeper Version 3.4.x Compatibility"})}),"\n","\n",(0,n.jsx)(t.p,{children:"ZooKeeper 3.4.x is now at end-of-life. Consequently, the latest versions of Curator have removed support for it. If you wish to use Curator with ZooKeeper 3.4.x you should pin to version 4.2.x of Curator. Curator 4.2.x supports ZooKeeper 3.4.x ensembles in a soft-compatibility mode. To use this mode you must exclude ZooKeeper when adding Curator to your dependency management tool."}),"\n",(0,n.jsxs)(w,{children:[(0,n.jsx)(V,{value:"maven",label:"Maven",default:!0,children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.apache.curator</groupId>\n    <artifactId>curator-recipes</artifactId>\n    <version>4.2.0</version>\n    <exclusions>\n        <exclusion>\n            <groupId>org.apache.zookeeper</groupId>\n            <artifactId>zookeeper</artifactId>\n        </exclusion>\n    </exclusions>\n</dependency>\n"})})}),(0,n.jsx)(V,{value:"gradle",label:"Gradle",default:!0,children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-groovy",children:"compile('org.apache.curator:curator-recipes:$curatorVersion') {\n  exclude group: 'org.apache.zookeeper', module: 'zookeeper'\n}\n"})})})]}),"\n",(0,n.jsx)(t.p,{children:"You must add a dependency on ZooKeeper 3.4.x also."}),"\n",(0,n.jsxs)(t.p,{children:['Curator will detect which ZooKeeper library is in use and automatically set ZooKeeper 3.4 compatibility mode as needed. In this mode, all features not supported by 3.4 are disabled. It is up to your application code to "do the right thing" and not use these features. Use the ',(0,n.jsx)(t.code,{children:"isZk34CompatibilityMode()"})," method to determine which mode Curator is using at runtime."]}),"\n",(0,n.jsx)(t.h2,{id:"testing-with-zookeeper-34x",children:"Testing With ZooKeeper 3.4.x"}),"\n",(0,n.jsxs)(t.p,{children:["If you wish to use Curator's ",(0,n.jsx)(t.code,{children:"TestingServer"})," with ZooKeeper 3.4.x you must use the older version of it (in addition to the instructions above):"]}),"\n",(0,n.jsxs)(w,{children:[(0,n.jsx)(V,{value:"maven",label:"Maven",default:!0,children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.apache.curator</groupId>\n    <artifactId>curator-test</artifactId>\n    <version>2.12.0</version>\n    <exclusions>\n        <exclusion>\n            <groupId>org.apache.zookeeper</groupId>\n            <artifactId>zookeeper</artifactId>\n        </exclusion>\n    </exclusions>\n    <scope>test</scope>\n</dependency>\n"})})}),(0,n.jsx)(V,{value:"gradle",label:"Gradle",default:!0,children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-groovy",children:"testCompile('org.apache.curator:curator-test:2.12.0') {\n  exclude group: 'org.apache.zookeeper', module: 'zookeeper'\n}\n"})})})]})]})}function A(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(N,{...e})}):N(e)}},6413:(e,t,r)=>{r.d(t,{R:()=>s,x:()=>i});var o=r(8101);const n={},a=o.createContext(n);function s(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);